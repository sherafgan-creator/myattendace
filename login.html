<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <?!= include("style"); ?>
  <?!= include("animations"); ?>
</head>
<body class="light">

<div class="card">
  <h3 style="text-align:center;font-size:21px;font-weight:600;margin-bottom:18px;">Secure Login ğŸ”</h3>

  <input type="text" id="user" placeholder="Enter Email or Username âœ‰ï¸">
  <input type="password" id="pass" placeholder="Enter Password ğŸ§©">

  <div id="msg" class="error"></div>

  <button onclick="login()">Login</button>
</div>

<script>
function login(){
  const u = document.getElementById("user").value.trim();
  const p = document.getElementById("pass").value.trim();

  google.script.run.withSuccessHandler(res=>{
    if(res.success){
      sessionStorage.setItem("loggedInUser", JSON.stringify({name: res.name, email: res.email}));
      window.open("?page=home","_self");
    } else {
      document.getElementById("msg").innerText = "Access Denied âŒ Invalid Credentials";
    }
  }).checkUser(u, p);
}

document.addEventListener("keydown", e => {
  if(e.ctrlKey && e.shiftKey && e.key === "L"){
    document.body.classList.toggle("dark"); 
  }
});
</script>

</body>
</html>
