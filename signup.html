<!DOCTYPE html>
<html>
<head>
  <?!= include('css'); ?>
</head>
<body>

<div class="box">
  <h3>Create Account</h3>

  <input id="fullname" placeholder="Full Name">
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">

  <button onclick="signup()">Sign Up</button>
  <p id="msg" style="color:red;"></p>

  <div class="link">
    <a href="#" onclick="loadLogin()">Back to Login</a>
  </div>
</div>

<script>
function loadLogin() {
  google.script.run.withSuccessHandler(function(page) {
    document.open(); document.write(page); document.close();
  }).include('login');
}

function signup() {
  let name = fullname.value;
  let user = username.value;
  let pass = password.value;

  google.script.run.withSuccessHandler(function(result) {
    
    if (result.success) {
      alert("Account created! Please login.");
      loadLogin();
    } else {
      msg.innerText = result.message;
    }

  }).signupUser(user, pass, name);
}
</script>

</body>
</html>
